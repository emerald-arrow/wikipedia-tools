# Database scripts

These scripts use results .csv files from Alkamelsystems websites as data sources.

When it comes to .csv files generated by these scripts <ins>you must not modify their headers</ins>. If string value ought to be empty then do not modify anything between parenthesis at all.

Descriptions of headers in generated .csv files:

- **codename** — unique name of driver/team etc. based on exact spelling in a result .csv file. <ins>Do not modify it</ins>.
- **link**/**short_link** — link to an English Wikipedia article. If an article about driver/team etc. does not exist then double square brackets should be removed.
- **long_link** — link to [Wikidata's list of articles](https://en.wikipedia.org/wiki/Template:Interlanguage_link#Link_to_Reasonator_and_Wikidata) or [link to existing article in non-English Wikipedia version](https://en.wikipedia.org/wiki/Template:Interlanguage_link#Link_to_one_foreign_language) in case an article does not exist on English Wikipedia. If filled then this value is used to display that link in race results only. In general, I never put any link here as I have seen that interlanguage links are almost unused in endurance racing articles on English Wikipedia.
- **nationality** — three-letter country code in ISO 3166-1 alpha-3 format. If data source file does not have flag column then question mark will be saved instead.

.csv files generated by scripts are saved in this directory. If they are not moved then they will be automatically found after choosing option of adding data into database.

Scripts descriptions:
- **db_cars.py** — script that generates cars data .csv files and adds their contents into database. Any results .csv file can be used to generate cars data .csv files, so test/free practice/qualifying/race results files can be used.
  - example excerpt of correctly filled in data:
  ```
  "codename","link"
  "Alpine A424","[[Alpine A424]]"
  "Aston Martin Vantage AMR LMGT3","[[Aston Martin Vantage (2018)#GT3|Aston Martin Vantage AMR LMGT3]]"
  ```
- **db.drivers.py** — script that generates drivers data .csv files and adds their contents into database. For ACO-organised championships (FIA WEC, ELMS etc.) race results .csv files cannot be used to generate drivers data. In case of IMSA-organised championships any results .csv file can be used. 
  - example excerpt of correctly filled in data:
  ```
  "codename","nationality","short_link","long_link"
  "alejandro garcia","MEX","[[Alex García (racing driver, born 2003)|Alejandro García]]",""
  "matthew richard bell","GBR","Matthew Richard Bell",""
  "rahel frey","CHE","[[Rahel Frey]]",""
  "darren leung","GBR","Darren Leung","{{ill|Darren Leung|WD=Q125558727}}"
  "johnny laursen","DNK","Johnny Laursen","{{ill|Johnny Laursen|de|Johnny Laursen}}"
  ```
- **db_points.py** — script that adds points-awarding sessions results into database.
- **db_teams.py** — script that generates teams data .csv files and adds their contents into database. Any results .csv file can be used to generate data file but only test/free practices/qualifying results from ACO-organised championships have country flags. If none of aforementioned files are used then three-letter country codes are replaced with question marks.
  - example excerpt of correctly filled in data:
  ```
  "codename","nationality","car_number","short_link","long_link"
  "#8 Toyota Gazoo Racing","JPN","8","[[Toyota Gazoo Racing Europe|Toyota Gazoo Racing]]",""
  "#85 Iron Dames","ITA","85","[[Iron Lynx|Iron Dames]]",""
  "#66 JMW Motorsport","GBR","66","JMW Motorsport",""
  ```